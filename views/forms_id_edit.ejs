<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("./includes/head.ejs")  %> 
</head>
<body>
    <%- include("./includes/header.ejs")  %>

    <% if (locals.success) { %>
        <div class="Card Success" id="cardWrapper">
            <button class="Card_deleteBT">X</button>
            <h4 class="Card_title">El Formulario ha sido creado con éxito.</h4>
            <a href="/forms" class="Card_link">Ver formularios</a>
        </div> 
    <% } %> 
    <% if (locals.failure && !locals.success) { %>
        <div class="Card Failure" id="cardWrapper">
            <button class="Card_deleteBT">X</button>
            <h4 class="Card_title">Error: formulario no pudo ser creado</h4>
            <p class="Card_message">
                <%= locals.details?.message %>
            </p>
        </div> 
    <% } %> 

    <section class="FormEdit">
        <table class="FormEdit_data">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Autor</th>
                    <th>Descripción</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="data-name">
                        <%=locals.data? locals.data.name : locals.form?.name%>
                    </td>
                    <td class="data-author">
                        <%=locals.data? locals.data.author : locals.form?.author%>
                    </td>
                    <td class="data-description">
                        <%=locals.data? locals.data.description : locals.form?.description%>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="FormEdit_Editor">
            <h3 class="Editor_title">Editar Formulario:</h3>
            <form method="post" class="Editor" id="editorForm">
                <div class="Editor_field">
                    <label for="">Nombre:</label>
                    <input type="text" name="name" class="data-name" 
                    value="<%=locals.data? locals.data.name : locals.form?.name%>">
                </div>
                <div class="Editor_field">
                    <label for="">Autor:</label>
                    <input type="text" name="author" class="data-author" 
                    value="<%=locals.data? locals.data.author : locals.form?.author%>">
                </div>
                <div class="Editor_field">
                    <label for="">Descripción:</label>
                    <textarea 
                        name="description" 
                        id="description" 
                        cols="30" 
                        rows="10"
                        class="data-description"
                    ><%=locals.data? locals.data.description : locals.form?.description%></textarea>
                </div>
                <div class="Editor_action">
                    <input type="submit" value="Guardar">
                </div>
            </form>

            <section class="Editor_questions">
                <label class="questions_title">Editar/Crear Preguntas</label>
                <button class="questions_addBT" id="questionsAddBT">+</button>
                <div class="questions_wrapper" id="questionsWrapper"></div>
                <button class="questions_saveBT" id="questionsSaveBT">Guardar</button>
            </section>
        </div>
    </section>
    <%- include("./includes/footer.ejs")  %> 

    <script type="module" src="/js/forms_id_edit.js"></script>
</body>
</html>